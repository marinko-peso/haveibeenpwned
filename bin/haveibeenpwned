#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os, sys, argparse
from haveibeenpwned.status import pwned, pwned_full
from haveibeenpwned import __version__, __summary__


def _display_status(email):
    if pwned(email):
        print('This email address has been pwned!')
    else:
        print('No problems here! :-)')


def _display_status_with_data(email):
    response = pwned_full(email)
    if not response:
        print('No problems here! :-)')
    else:
        print(response.data)


def main():
    parser = argparse.ArgumentParser(description=__summary__)
    parser.add_argument('email', metavar='email', help='Email address to check against')
    parser.add_argument('-v', '--version', action='store_true', help='currently installed version')
    parser.add_argument('-f', '--full', action='store_true', help='response will full data not just boolean, if any exists')
    args = parser.parse_args()

    if args.version:
        print(__version__)
        sys.exit(1)

    email = args.email
    if args.full:
        _display_status_with_data(email)
    else:
        _display_status(email)
    print('More detailed data on: https://haveibeenpwned.com/')


if __name__ == '__main__':
    main()
